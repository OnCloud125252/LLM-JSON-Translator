# Application environment (development, staging, production)
APP_ENVIRONMENT=development

# Optional - Server host binding
HOST=127.0.0.1

# Optional - Server port
PORT=3000

# Optional - Logging level (0=DEBUG, 1=INFO, 2=WARN, 3=ERROR)
# In development, defaults to DEBUG; in production, defaults to INFO
LOG_LEVEL=1

# Optional - Redis connection URL for caching
# If not provided, uses in-memory cache (data lost on restart)
# Format: redis://[username:]password@host:port[/database]
REDIS_URL=redis://default:ABC@localhost:10001

# Required - API key for authenticating requests
APP_API_KEY=<APP_API_KEY>

# Optional - Server URL for API requests
API_BASE_URL=<API_BASE_URL>

# Required - OpenAI API key for LLM translation
OPENAI_API_KEY=<OPENAI_API_KEY>

# Optional - LLM model to use (default: gpt-4.1-mini)
# Supported: gpt-4.1-mini, gpt-4.1, gpt-4.1-nano, gpt-4o-mini, gpt-4o
LLM_MODEL=gpt-4.1-mini

# Optional - Number of text fields per translation batch (default: 10, max: 100)
# Larger batches = fewer API calls but more tokens per request
BATCH_SIZE=10

# Optional - Number of batches to process concurrently (default: 50)
# Higher values increase parallelism but also memory usage
CONCURRENT_BATCH_CHUNK_SIZE=50

# Optional - Maximum retry attempts for failed translations (default: 5)
MAX_RETRIES=5

# Optional - Safety ratio for batch token limits (default: 0.6)
# Batches will be split if they exceed (model_max_tokens * this_ratio)
# Range: 0.1 to 0.9
BATCH_TOKEN_SAFETY_RATIO=0.6

# Optional - Maximum entries in memory cache (default: 10000)
# Only used when REDIS_URL is not configured
# Prevents unbounded memory growth when using in-memory cache
MEMORY_CACHE_MAX_SIZE=10000

# Optional - TTL for memory cache entries in seconds (default: 3600 = 1 hour)
# Only used when REDIS_URL is not configured
MEMORY_CACHE_TTL_SECONDS=3600

# Optional - Maximum memoized cache keys (default: 10000)
# Improves performance by avoiding repeated hash computation for identical texts
CACHE_KEY_MEMOIZATION_LIMIT=10000

# Optional - L1 in-memory hot cache max size (default: 1000)
# Used even when Redis is configured. Provides sub-microsecond lookups for hot keys.
L1_CACHE_MAX_SIZE=1000

# Optional - L1 in-memory hot cache TTL in seconds (default: 300 = 5 minutes)
L1_CACHE_TTL_SECONDS=300

# Optional - Cache key version for invalidation (default: v1)
# Bump this when translation prompts or logic changes to invalidate stale cache entries
CACHE_KEY_VERSION=v1

# Optional - Cache stats logging interval in milliseconds (default: 300000 = 5 minutes)
CACHE_STATS_LOG_INTERVAL_MS=300000
